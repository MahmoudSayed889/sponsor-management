<div class="container-fluid py-5">
    <div class="table-responsive border rounded shadow-sm">
        
        <table class="table table-bordered table-hover table-striped">
            <thead class=" table-dark">
              <tr>
                <th scope="col">#</th>
                <th scope="col">اسم الكفيل</th>
                <th scope="col">النوع</th>
                <th scope="col">رقم تحقيق الشخصية</th>
                <th scope="col">العنوان</th>
                <th scope="col">الرقم البريدي</th>
                <th scope="col">رقم الهاتف</th>
                <th scope="col">الايميل</th>
                <th scope="col">الحد الاقصى</th>
                <th scope="col">الحد المالي</th>
                <th scope="col">المهلة الزمنية</th>
                <th scope="col">الموظفون</th>
              </tr>
            </thead>
            <tbody>

                @for (sponsor of allSponsor; track $index) {

                    <tr>
                        <th scope="row">{{sponsor.id}}</th>
                        <td>{{sponsor.sponsor_name}}</td>
                        <td>{{sponsor.sponsor_type}}</td>
                        <td>{{sponsor.sponsor_ID}}</td>
                        <td>{{sponsor.address}}</td>
                        <td>{{sponsor.postal_code}}</td>
                        <td>{{sponsor.phone}}</td>
                        <td>{{sponsor.email}}</td>
                        <td>{{sponsor.max_limit}}</td>
                        <td>{{sponsor.financial_limit}}</td>
                        <td>{{sponsor.time_limit}}</td>
                        <td>
                            <a type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" href="#{{$index}}">
                                <i class="fa-solid fa-user-tie"></i>
                            </a>
                        </td>
                    </tr>

                    <div class="modal fade" id="{{$index}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-scrollable bg-transparent">
                          <div class="modal-content">

                            <div class="modal-header py-2">
                              <h1 class="modal-title fs-5 fw-bold" id="exampleModalLabel">الموظفون لهذا الكفيل </h1>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>

                            <div class="modal-body">
                              
                                @if(sponsor.contact_officers.length > 0) {

                                    @for (office of sponsor.contact_officers; track $index) {

                                        <div class=" border-bottom mb-3">
                                            <p> <span class=" fw-bold">الاسم: </span> <span>{{office.contact_officer_name}}</span></p>
                                            <p> <span class=" fw-bold">رقم الهاتف: </span> <span>{{office.phone}}</span></p>
                                            <p> <span class=" fw-bold">الايميل: </span> <span>{{office.email}}</span></p>
                                        </div>
                                    }
                                } @else {

                                    <div class=" text-center">
                                        <p class=" h6">لا يوجد موظفين لهذا الكفيل</p>
                                    </div>
                                }

                            </div>
                            

                          </div>
                        </div>
                    </div>
                }
              
            </tbody>
        </table>



        <div class="container-fluid mb-3">

            <div class=" d-flex justify-content-between align-items-center">

                <div>
                    <a [routerLink]="['/edit-view']" routerLinkActive="router-link-active" class=" fw-bold">  اضافة كفيل جديد </a>
                </div>
    
                <nav aria-label="Page navigation example">
                    <ul class="pagination mb-0">

                      <li class="page-item" [ngClass]="{'disabled': currentPage<=1}">
                        <a class="page-link"  aria-label="Previous" (click)="prevPage()">
                          <span aria-hidden="true">&laquo;</span>
                        </a>
                      </li>

                      <li class="page-item"><a class="page-link border-0 px-3">{{currentPage}}</a></li>
                      <li class="page-item"><a class="page-link border-0 px-3">من</a></li>
                      <li class="page-item"><a class="page-link border-0 px-3">{{numOfPages}}</a></li>

                      <li class="page-item" [ngClass]="{'disabled': currentPage>=numOfPages}">
                        <a class="page-link" aria-label="Next" (click)="nextPage()">
                          <span aria-hidden="true">&raquo;</span>
                        </a>
                      </li>

                    </ul>
                </nav>
                
            </div>
    
    
        </div>

    </div>

    
</div>


@if( isLoadnig ) {
    <div class="loading-screen">
        <span class="loader"></span>
    </div>
}